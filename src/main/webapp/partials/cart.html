<div class="container">
    <div class="row">
        <form id="cartform" name="cartform">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                    <tr>
                        <th>Товар</th>
                        <th>Фото</th>
                        <th>Количество и комментарии</th>
                        <th>Цена</th>
                        <th>Сумма</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="item in items"
                        ng-class="{opacity50: item.count < 1}">

                        <td>
                            <a ui-sref="phone({phoneId:item.id})"><h1>{{item.name}}</h1></a>
                        </td>

                        <td class="thumbnail">

                            <a ui-sref="phone({phoneId:item.id})" class="thumb"><img ng-src="{{item.images[0]}}"></a>
                        </td>


                        <td>
                            <div class="row">
                                <div class="form-group col-xs-8">

                                    <input type="text" name="count[{{item.count}}]" ng-model="item.count"
                                           class="form-control input-sm">
                                </div>

                                <button ng-click="minus($index)"
                                        class="btn btn-default input-sm glyphicon glyphicon-minus"></button>
                                <button ng-click="plus($index)"
                                        class="btn btn-default input-sm glyphicon glyphicon-plus"></button>
                            </div>

                        </td>
                        <td>{{item.cost | currency}}</td>
                        <td>{{item.count * item.cost | currency}}</td>
                        <td><a href data-toggle="tooltip" title="пометить для удаления" data-placement="left"
                               class="pointer helptip glyphicon glyphicon-remove text-danger"
                               ng-click="removeItem(item)"></a></td>
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <td>
                        </td>

                        <td ng-switch="cartform.$dirty && cartform.$valid && !cartproc && has_items()">
                            <button ng-switch-when="true" ng-click="save()" class="btn btn-success btn-xs pull-right">
                                Сохранить изменения
                            </button>
                            <button ng-switch-default class="btn btn-success btn-xs pull-right" disabled>Сохранить
                                изменения
                            </button>
                        </td>
                        <td>Итого:</td>
                        <td><strong><p class="text-primary">{{total() | currency}}</p></strong></td>
                        <td></td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </form>
    </div>

    <div ng-switch="has_items()">
        <div ng-switch-when="true">
            <div class="row">
                <div class="col-md-offset-2 col-md-8">
                    <h3>Оформление заказа:</h3>
                </div>
                <div class="col-md-2"></div>
            </div>
            <div class="row">
                <div class="col-md-offset-2 col-md-8">
                    <form novalidate class="form-horizontal" id="orderform" name="orderform">
                        <div class="form-group" ng-class="{'has-success': order.name}">
                            <label for="order_name" class="control-label col-lg-3">Имя:</label>

                            <div class="col-lg-9">
                                <input type="text" class="form-control" id="order_name" name="order_name"
                                       ng-model="order.name">
                            </div>
                        </div>
                        <div class="form-group"
                             ng-class="{'has-error': orderform.order_email.$invalid, 'has-success': !orderform.order_email.$invalid && order.email}">
                            <label for="order_email" class="control-label col-lg-3">Эл. почта:</label>

                            <div class="col-lg-9">
                                <input type="email" class="form-control" id="order_email" name="order_email"
                                       ng-model="order.email">
                            </div>
                        </div>
                        <div class="form-group"
                             ng-class="{'has-error': orderform.order_phone.$invalid, 'has-success': !orderform.order_phone.$invalid}">
                            <label for="order_phone" class="control-label col-lg-3">Телефон:</label>

                            <div class="col-lg-9">
                                <input type="text" class="form-control" id="order_phone" name="order_phone"
                                       ng-model="order.phone" required>
                            </div>
                        </div>
                        <div class="form-group" ng-class="{'has-success': order.address}">
                            <label for="order_address" class="control-label col-lg-3">Адрес:</label>

                            <div class="col-lg-9">
                                <input type="text" class="form-control" id="order_address" name="order_address"
                                       ng-model="order.address">
                            </div>
                        </div>
                        <div class="form-group" ng-class="{'has-success': order.comments}">
                            <label for="order_comments" class="control-label col-lg-3">Комментарии к заказу:</label>

                            <div class="col-lg-9">
                                <textarea type="text" class="form-control" id="order_comments" name="order_comments"
                                          ng-model="order.comments"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-md-2"></div>
            </div>
            <div class="row">
                <div class="col-md-offset-2 col-md-2"
                     ng-switch="cartform.$valid && orderform.$valid && !orderproc && has_items()">
                    <button ng-switch-when="true" ng-click="send()" class="btn btn-success">Отправить</button>
                    <button ng-switch-default class="btn btn-success" disabled>Отправить</button>
                </div>
                <div class="col-md-6">
                    <div ng-show="orderproc" class="progress progress-striped active">
                        <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0"
                             aria-valuemax="100" style="width: 100%"></div>
                    </div>
                </div>
                <div class="col-md-2"></div>
            </div>
        </div>
        <div ng-switch-default>
            <div class="alert alert-warning">Корзина пуста</div>
        </div>
    </div>


</div>



